<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Alumni - Дарын Түлектер</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/header.css">
</head>
<body>
<nav class="navbar">
    <div class="logo">Дарын Түлектер</div>
    <div class="pages">
        <ul class="nav-items" id="authNav">
            <li><a href="/">Alumni</a></li>
            <li><a href="/alumni-crud">CRUD</a></li>
            <li><a href="/login">Login</a></li>
        </ul>
    </div>
</nav>

<header>
    <h1>Alumni Community</h1>
    <h2>Welcome to the Daryn Graduates platform.</h2>
</header>
<main class="alumni">
    
</main>

<script>
async function updateNavbar() {
  const res = await fetch("/auth/me");
  const data = await res.json();

  const nav = document.getElementById("authNav");

  if (data.authenticated) {
    nav.innerHTML = `
      <li><a href="/">Alumni</a></li>
      <li><a href="/alumni-crud">CRUD</a></li>
      <li><button id="logoutBtn">Logout</button></li>
    `;

    document.getElementById("logoutBtn").addEventListener("click", async () => {
      await fetch("/auth/logout", { method: "POST" });
      window.location.href = "/login";
    });

  } else {
    nav.innerHTML = `
      <li><a href="/">Alumni</a></li>
      <li><a href="/login">Login</a></li>
      <li><a href="/register">Register</a></li>
    `;
  }
}

updateNavbar();
</script>

</body>
</html>